{% extends "polls/base.html" %}
{% block title %}Trends Â· The Makeup Community{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="trends-hero">
  <div class="hero-content">
    <h1>Trending Now</h1>
    <p class="hero-description">
      Discover the hottest makeup products that our community is loving right now. 
      These trending items are based on recent review activity, ratings, and community buzz.
    </p>
    <div class="trending-stats">
      <div class="stat">
        <span class="stat-number">6</span>
        <span class="stat-label">Top Trending</span>
      </div>
      <div class="stat">
        <span class="stat-number">{{ recent_reviews|default:"80+" }}</span>
        <span class="stat-label">Recent Reviews</span>
      </div>
      <div class="stat">
        <span class="stat-number">{{ active_users|default:"20+" }}</span>
        <span class="stat-label">Active Reviewers</span>
      </div>
    </div>
  </div>
</section>

<!-- Trending Products -->

  
  <div class="trending-grid">
    {% for p in object_list|slice:":6" %}
      <article class="trend-card">
        <a href="{% url 'product-detail' p.pk %}" class="product-link">
          <div class="product-image">
            <div class="trend-rank">
              <span class="rank-number">#{{ forloop.counter }}</span>
              <span class="rank-label">Trending</span>
            </div>
            {% if p.image_url %}
              <img src="{{ p.image_url }}" alt="{{ p.brand }} {{ p.name }}" loading="lazy" onerror="this.parentElement.classList.add('no-image');">
              <div class="image-placeholder fallback">
                <span class="placeholder-icon">ðŸ’„</span>
                <span class="placeholder-text">No Image</span>
              </div>
            {% else %}
              <div class="image-placeholder">
                <span class="placeholder-icon">ðŸ’„</span>
                <span class="placeholder-text">No Image</span>
              </div>
            {% endif %}
            <div class="image-overlay">
              <span class="view-text">View Details</span>
            </div>
          </div>
        </a>
        
        <div class="product-info">
          <div class="brand-name">{{ p.brand }}</div>
          <h3 class="product-name">
            <a href="{% url 'product-detail' p.pk %}">{{ p.name }}</a>
          </h3>
          
          <div class="rating-section">
            <div class="rating-display">
              <div class="stars">
                <svg viewBox="0 0 24 24" class="star"><path d="M12 2l3.1 6.3 6.9 1-5 4.9 1.2 6.8L12 17.8 5.8 21l1.2-6.8-5-4.9 6.9-1z"/></svg>
                <span class="rating-value">{{ p.recent_avg|default:0|floatformat:1 }}</span>
              </div>
              <div class="review-count">{{ p.recent_reviews|default:0 }} recent reviews</div>
            </div>
          </div>
          
          <div class="trending-metrics">
            <div class="metric">
              <span class="metric-label">Trend Score</span>
              <span class="metric-value">{{ p.trending_score|floatformat:1 }}</span>
            </div>
            <div class="metric">
              <span class="metric-label">Total Reviews</span>
              <span class="metric-value">{{ p.reviews_count|default:0 }}</span>
            </div>
          </div>
          
          <div class="card-actions">
            <a href="{% url 'product-detail' p.pk %}" class="btn btn-primary">View Reviews</a>
            <a href="{% url 'product-detail' p.pk %}#write-review" class="btn btn-outline">Write Review</a>
          </div>
        </div>
      </article>
    {% empty %}
      <div class="empty-state">
        <div class="empty-icon">ðŸ“ˆ</div>
        <h3>No Trending Products Yet</h3>
        <p>Be the first to review products and help them trend in our community!</p>
        <a href="{% url 'products' %}" class="btn btn-primary">Browse Products</a>
      </div>
    {% endfor %}
  </div>
</section>
{% endblock %}
